{
  "module": "fairlaunch",
  "networks": ["EVM", "Solana"],
  "doc_type": "docs/ui-ux",
  "recommended_file_path": "docs/ui-ux/fairlaunch_ui-ux.json",
  "version": "1.0",
  "strategy": {
    "current_focus": "UI/UX dulu (user-facing) untuk Fairlaunch EVM & Solana. Admin UI dibangun belakangan.",
    "principles": [
      "UI state-machine driven (render by status, bukan logic bercabang di banyak tempat).",
      "Semua transaksi via TxRecord (CREATED->SUBMITTED->CONFIRMED/FAILED) dan polling DB/Indexer.",
      "EVM & Solana parity untuk flow user (connect, contribute, claim/refund).",
      "Komponen reusable dari Presale (NetworkBadge, StatusPill, TxStatusTimeline, ComplianceGateBanner) dipakai ulang."
    ]
  },
  "product_rules_summary": {
    "fairlaunch_core": {
      "softcap_only": true,
      "no_hardcap": true,
      "final_price_formula": "final_price = total_raised / tokens_for_sale",
      "refund_condition": "total_raised < softcap => refunds enabled",
      "liquidity_rule": {
        "min_percent_to_liquidity": 70,
        "lp_lock_min_months": 12
      },
      "vesting_team_required": true,
      "compliance_gating": {
        "dev_kyc_required": true,
        "sc_scan_required": true
      }
    }
  },
  "actors": [
    {
      "name": "Guest",
      "can": ["View fairlaunch list", "View fairlaunch detail"],
      "cannot": ["Contribute", "Claim", "Refund"]
    },
    {
      "name": "User/Investor",
      "can": [
        "Connect wallet",
        "Contribute",
        "View tx history",
        "Claim tokens if success",
        "Refund if fail"
      ],
      "notes": ["Must be on correct network/cluster"]
    },
    {
      "name": "Project Owner",
      "can": [
        "Create draft",
        "Configure fairlaunch",
        "Submit for review",
        "Deploy (when approved)",
        "Finalize (if owner-driven)"
      ],
      "gates": [
        "Dev KYC CONFIRMED",
        "SC Scan PASS/OVERRIDE_PASS",
        "Team vesting configured",
        "LP lock plan >= 12 months"
      ]
    },
    {
      "name": "Admin/Reviewer (Later)",
      "can": ["Approve/Reject", "Audit", "Emergency pause/cancel (if allowed)"],
      "status": "DEFERRED (not built now)"
    }
  ],
  "state_machine": {
    "states": [
      "DRAFT",
      "SUBMITTED_FOR_REVIEW",
      "REJECTED",
      "APPROVED_TO_DEPLOY",
      "DEPLOYING",
      "LIVE",
      "PAUSED",
      "ENDED",
      "FINALIZING",
      "FINALIZED_SUCCESS",
      "FINALIZED_FAIL",
      "REFUNDING",
      "CLOSED"
    ],
    "key_transitions": [
      { "from": "DRAFT", "to": "SUBMITTED_FOR_REVIEW", "trigger": "owner_submit" },
      {
        "from": "SUBMITTED_FOR_REVIEW",
        "to": "APPROVED_TO_DEPLOY",
        "trigger": "admin_approve (later)"
      },
      { "from": "SUBMITTED_FOR_REVIEW", "to": "REJECTED", "trigger": "admin_reject (later)" },
      { "from": "APPROVED_TO_DEPLOY", "to": "DEPLOYING", "trigger": "owner_deploy" },
      { "from": "DEPLOYING", "to": "LIVE", "trigger": "chain_confirmed + indexer_synced" },
      { "from": "LIVE", "to": "ENDED", "trigger": "end_time_reached" },
      { "from": "ENDED", "to": "FINALIZING", "trigger": "finalize_called (owner/system)" },
      { "from": "FINALIZING", "to": "FINALIZED_SUCCESS", "trigger": "total_raised >= softcap" },
      { "from": "FINALIZING", "to": "FINALIZED_FAIL", "trigger": "total_raised < softcap" },
      { "from": "FINALIZED_FAIL", "to": "REFUNDING", "trigger": "refunds_enabled" },
      { "from": "FINALIZED_SUCCESS", "to": "CLOSED", "trigger": "claims_complete_or_window_end" },
      { "from": "REFUNDING", "to": "CLOSED", "trigger": "refunds_complete_or_window_end" }
    ]
  },
  "information_architecture": {
    "routes_user": ["/fairlaunch", "/fairlaunch/:id", "/fairlaunch/:id/transactions"],
    "routes_owner": ["/create/fairlaunch", "/dashboard/owner/fairlaunch"],
    "admin_routes_later": ["/admin/fairlaunch/review"],
    "navigation_entry_points": [
      "Explore -> Fairlaunch list",
      "Project detail -> Create fairlaunch (owner)",
      "Profile -> My fairlaunch (owner)"
    ]
  },
  "screens_uiux": [
    {
      "id": "SCR-FL-01",
      "name": "Fairlaunch List",
      "sections": [
        "Filters: network (EVM/Solana), status, search",
        "Cards: project name, network badge, status pill, raised/softcap progress, time left",
        "CTA: View detail"
      ],
      "states": ["loading", "empty", "error"]
    },
    {
      "id": "SCR-FL-02",
      "name": "Fairlaunch Detail",
      "tabs": ["Overview", "Contribute", "Claim", "Refund", "Transactions"],
      "overview_sections": [
        "Header: project, token symbol, network, status",
        "Progress: total_raised vs softcap, participants",
        "Fairlaunch rules: no hardcap, final price formula, refund condition",
        "Liquidity & LP lock summary (70%+ & >=12mo)",
        "Team vesting summary"
      ],
      "contribute_sections": [
        "Wallet status (connected + correct network check)",
        "Amount input + presets",
        "Allowance step (EVM only if ERC20 payment token)",
        "CTA Contribute",
        "Risk/notice: final price determined after end"
      ],
      "claim_sections": [
        "Eligibility: only after FINALIZED_SUCCESS",
        "Claimable token allocation (pro-rata)",
        "CTA Claim"
      ],
      "refund_sections": [
        "Eligibility: FINALIZED_FAIL/REFUNDING",
        "Refundable amount",
        "CTA Refund"
      ],
      "transactions_sections": ["Tx list from DB: action, hash/sig, status, time", "Explorer link"],
      "states": ["loading", "empty", "error", "indexer_delay_notice"]
    },
    {
      "id": "SCR-FL-03",
      "name": "Create Fairlaunch Wizard (Owner)",
      "steps": [
        "Basic Info",
        "Sale Params (tokens_for_sale, softcap, start/end, payment token)",
        "Team Vesting (mandatory)",
        "Liquidity Plan (>=70% to LP + LP lock >=12 months)",
        "Compliance Check (Dev KYC + SC Scan)",
        "Review & Submit"
      ],
      "states": ["draft_saved", "submit_success", "blocked_by_gates"]
    },
    {
      "id": "SCR-FL-04",
      "name": "Owner Fairlaunch Dashboard",
      "sections": [
        "Table/list of owner fairlaunch rounds",
        "Actions: Edit draft, Delete draft, Deploy (if approved), View analytics (optional later)"
      ],
      "states": ["loading", "empty", "error"]
    }
  ],
  "reusable_components": [
    "NetworkBadge",
    "StatusPill",
    "ComplianceGateBanner",
    "VestingScheduleBuilder (Team)",
    "TxStatusTimeline",
    "AmountInput + Presets",
    "WalletStatusRow",
    "ExplorerLink"
  ],
  "data_contract_ui": {
    "entities": {
      "FairlaunchRound": {
        "fields": [
          "id",
          "projectId",
          "network",
          "chainIdOrCluster",
          "status",
          "saleTokenAddressOrMint",
          "paymentTokenAddressOrMint",
          "tokensForSale",
          "softcap",
          "totalRaised",
          "participantCount",
          "startAt",
          "endAt",
          "liquidityPercent",
          "lpLockPlanId",
          "teamVestingPlanId",
          "devKycStatus",
          "scScanStatus",
          "contractAddressOrProgramId",
          "createdAt",
          "updatedAt"
        ]
      },
      "Contribution": {
        "fields": [
          "id",
          "roundId",
          "walletAddress",
          "amount",
          "txHashOrSig",
          "txStatus",
          "createdAt",
          "confirmedAt"
        ]
      },
      "TxRecord": {
        "fields": [
          "id",
          "action",
          "network",
          "hashOrSig",
          "status",
          "metadata",
          "createdAt",
          "updatedAt"
        ]
      }
    },
    "api_endpoints_planned": [
      { "method": "GET", "path": "/api/fairlaunch", "desc": "List rounds with filters" },
      { "method": "GET", "path": "/api/fairlaunch/:id", "desc": "Detail round" },
      { "method": "POST", "path": "/api/fairlaunch", "desc": "Create draft (owner)" },
      { "method": "PUT", "path": "/api/fairlaunch/:id", "desc": "Update draft (owner)" },
      { "method": "DELETE", "path": "/api/fairlaunch/:id", "desc": "Delete draft (owner)" },
      { "method": "POST", "path": "/api/fairlaunch/:id/submit", "desc": "Submit for review" },
      {
        "method": "POST",
        "path": "/api/fairlaunch/:id/deploy",
        "desc": "Deploy (if approved) - later"
      },
      {
        "method": "POST",
        "path": "/api/fairlaunch/:id/contribute/intent",
        "desc": "Tx intent contribute"
      },
      {
        "method": "POST",
        "path": "/api/fairlaunch/:id/contribute/confirm",
        "desc": "Confirm contribute"
      },
      { "method": "POST", "path": "/api/fairlaunch/:id/finalize", "desc": "Finalize - later" },
      { "method": "POST", "path": "/api/fairlaunch/:id/claim", "desc": "Claim tokens" },
      { "method": "POST", "path": "/api/fairlaunch/:id/refund/quote", "desc": "Refund quote" },
      { "method": "POST", "path": "/api/fairlaunch/:id/refund/claim", "desc": "Refund claim" }
    ]
  },
  "roadmap": {
    "milestones": [
      {
        "id": "FL-M1",
        "name": "UI/UX Spec + IA",
        "goal": "Dokumen UI/UX lengkap untuk Fairlaunch EVM & Solana (list, detail, wizard, owner dashboard)",
        "outputs": [
          "routes_user + routes_owner",
          "screen definitions + components",
          "state machine mapping to UI rendering"
        ],
        "definition_of_done": [
          "Semua screen punya: loading/empty/error states",
          "Semua status state machine punya copy/CTA yang jelas"
        ]
      },
      {
        "id": "FL-M2",
        "name": "User UI: List + Detail + Tabs",
        "goal": "User bisa browse fairlaunch & lihat detail + rules",
        "outputs": [
          "/fairlaunch list page",
          "/fairlaunch/:id detail (Overview/Contribute/Claim/Refund/Tx)"
        ],
        "definition_of_done": [
          "Render by status pill",
          "Explorer link available",
          "Wallet connect prompt safe"
        ]
      },
      {
        "id": "FL-M3",
        "name": "Owner UI: Wizard + Dashboard",
        "goal": "Owner bisa create & configure fairlaunch draft (gating ready)",
        "outputs": ["/create/fairlaunch wizard", "/dashboard/owner/fairlaunch dashboard"],
        "definition_of_done": [
          "Team vesting & liquidity plan mandatory validation",
          "Compliance gate banner shown (even if admin flow deferred)"
        ]
      },
      {
        "id": "FL-M4",
        "name": "Tx UI Scaffolding (No on-chain yet)",
        "goal": "Siapkan UI tx timeline & intents (mock/placeholder) untuk contribute/claim/refund",
        "outputs": [
          "TxStatusTimeline integrated",
          "TxRecord polling hooks",
          "Mock adapters per network"
        ],
        "definition_of_done": [
          "UI tidak crash meski backend/on-chain belum live",
          "Semua CTA disabled jika status belum eligible"
        ]
      },
      {
        "id": "FL-M5",
        "name": "Prep for Admin UI (Defer build)",
        "goal": "Siapkan data & status agar admin UI nanti tinggal plug-in",
        "outputs": [
          "SUBMITTED_FOR_REVIEW states handled in owner UI",
          "REJECTED reason placeholder field in UI"
        ],
        "definition_of_done": [
          "Owner melihat status submit & messaging jelas",
          "Tidak ada dead-end UX"
        ]
      }
    ]
  },
  "execution_prompt": {
    "target_agent": "sonnet",
    "format": "implementation",
    "prompt": "Kerjakan roadmap Fairlaunch UI/UX untuk EVM & Solana terlebih dahulu (tanpa membangun Admin UI sekarang). Implementasikan halaman user: /fairlaunch (list+filters) dan /fairlaunch/:id (tabs Overview/Contribute/Claim/Refund/Transactions) dengan rendering berbasis state-machine status. Implementasikan halaman owner: /create/fairlaunch wizard dan /dashboard/owner/fairlaunch. Terapkan validasi mandatory: team vesting, liquidity percent (>=70%), LP lock plan (>=12 months), dan tampilkan ComplianceGateBanner (Dev KYC + SC Scan) sebagai informasi/gating UI walau admin review deferred. Tambahkan scaffolding Tx UI: TxStatusTimeline + polling TxRecord (boleh pakai mock adapter) agar flow contribute/claim/refund siap untuk on-chain integration berikutnya. Pastikan UX lengkap: loading/empty/error states, wrong network prompt, rejected signature handling placeholder, dan anti double-submit. Outputkan PR-ready patch + ringkasan file berubah + checklist manual QA.",
    "deliverables": [
      "PR-ready patch (UI pages + reusable components + hooks)",
      "Manual QA checklist (pass/fail)",
      "docs/ui-ux/fairlaunch_ui-ux.json updated"
    ],
    "constraints": [
      "Admin UI tidak dibangun sekarang (defer).",
      "Jangan install dependency besar yang tidak perlu.",
      "Gunakan komponen reusable dari Presale bila sudah ada.",
      "Jaga parity EVM & Solana di level UX (connect, eligibility messaging, tx timeline)."
    ],
    "output_format_required": [
      "1) Summary implementasi",
      "2) File list perubahan",
      "3) Screen-to-component mapping",
      "4) Manual QA steps"
    ]
  }
}
