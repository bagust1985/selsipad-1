{
  "task": "Fix Create Fairlaunch & Create Bonding Curve Wizard UI (remove Presale copy/paste)",
  "priority": "HIGH",
  "target_agent": "sonnet",
  "language": "id",
  "mandatory_instruction": {
    "must_follow_prompt": true,
    "no_scope_creep": true,
    "do_not_build_admin_ui_now": true,
    "do_not_reuse_presale_steps_or_schema": true
  },
  "specs_to_read_first": {
    "required": true,
    "paths": [
      "/mnt/data/Modul_3_fairlaunch.json",
      "/mnt/data/Modul_4_bonding-curve.json",
      "/mnt/data/Modul_5_liquidity-lock.json",
      "/mnt/data/Modul_6_vesting.json",
      "/mnt/data/Modul_15_fee-creation.json",
      "/mnt/data/TechStack.json"
    ],
    "instruction": "BACA dan IKUTI specs pada docs/modul (file paths di atas). Jika ada konflik antara implementasi saat ini vs specs, specs adalah sumber kebenaran."
  },
  "context": {
    "problem_summary": [
      "UI /create/fairlaunch dan /create/bonding-curve masih menggunakan stepper + parameter Presale (9 steps) sehingga field & step tidak sesuai.",
      "Header fairlaunch menyebut 7 steps, tetapi stepper masih 9 nodes (indikasi config presale dipakai).",
      "Dibutuhkan pemisahan wizard config per modul (presale/fairlaunch/bondingcurve) agar tidak saling kebawa."
    ],
    "existing_reusable_assets": [
      "Wizard engine (stepper renderer, next/back, persistence) boleh dipakai ulang",
      "Komponen umum boleh reuse: NetworkBadge, StatusPill, ComplianceGateBanner, VestingScheduleBuilder, Fees UI, ReviewSummary shell"
    ]
  },
  "deliverables": [
    "PR-ready patch yang memperbaiki /create/fairlaunch dan /create/bonding-curve sesuai specs (UI/UX + schema + step config)",
    "Manual QA checklist + hasil (pass/fail) untuk kedua wizard",
    "Minimal 2 screenshots per wizard (Step 1 + Review step) menunjukkan stepper count benar & field sesuai"
  ],
  "acceptance_criteria": {
    "fairlaunch": [
      "Stepper fairlaunch menampilkan 7 steps (atau sesuai specs), bukan 9 presale steps",
      "Tidak ada step/field presale yang tidak relevan (contoh: Investor Vesting/Buyer unlock schedule sebagai default, Anti-bot step presale, dll) kecuali specs fairlaunch memang memintanya",
      "Field fairlaunch khas muncul & tervalidasi: softcap, tokens_for_sale, liquidity allocation >= 70%, LP lock duration >= 12 months, team vesting mandatory",
      "Copy/Key points fairlaunch konsisten: no hardcap, pro-rata, final price = total_raised/tokens_for_sale, refund if < softcap",
      "LocalStorage key fairlaunch unik (tidak collision dengan presale/bondingcurve)"
    ],
    "bonding_curve": [
      "Create bonding curve wizard tidak memakai sale params presale (start/end, min/max buy, investor vesting, anti-bot, dll) kecuali specs bonding curve menyatakan demikian",
      "Stepper bonding curve menampilkan jumlah step yang sesuai specs bonding curve (bukan 9 presale steps)",
      "Field bonding curve khas muncul & tervalidasi: token mint/metadata, curve params (virtual reserves/target), fee disclosures (deploy fee, swap fee, migration fee), team vesting mandatory",
      "LocalStorage key bonding curve unik (tidak collision dengan presale/fairlaunch)",
      "UI menampilkan edukasi migration + LP lock requirement >= 12 months AFTER migration (sesuai specs)"
    ],
    "general": [
      "Wizard engine tetap reusable tetapi config/schema/steps benar-benar terpisah per modul",
      "Tidak ada hardcoded reference ke PRESALE_STEPS di fairlaunch/bondingcurve",
      "Tidak ada regression pada /create/presale"
    ]
  },
  "implementation_requirements": {
    "architecture": {
      "wizard_engine": "shared",
      "module_configs": [
        {
          "name": "fairlaunchWizardConfig",
          "must_include": ["steps[]", "zodSchema", "defaultValues", "storageKey", "reviewMapper"],
          "storageKey_rule": "unique key (e.g. wizard:fairlaunch:<version>)"
        },
        {
          "name": "bondingCurveWizardConfig",
          "must_include": ["steps[]", "zodSchema", "defaultValues", "storageKey", "reviewMapper"],
          "storageKey_rule": "unique key (e.g. wizard:bondingcurve:<version>)"
        }
      ],
      "forbidden": [
        "Importing presale config/steps/schema into fairlaunch or bondingcurve pages",
        "Reusing presale LocalStorage persistence key"
      ]
    },
    "fairlaunch_step_structure": {
      "required_step_count": 7,
      "required_steps": [
        "Basic Info",
        "Fairlaunch Params (tokens_for_sale, softcap, payment token, start/end, optional min/max)",
        "Liquidity Plan (>=70% to LP + LP lock >=12 months)",
        "Team Vesting (mandatory)",
        "Fees",
        "Review",
        "Submit (Compliance check: Dev KYC + SC Scan if required by specs)"
      ],
      "explicitly_remove_if_present": [
        "Investor Vesting / Buyer unlock schedule (default)",
        "Anti-bot as a dedicated step (unless specs require; if needed put as Advanced toggle inside Params)"
      ]
    },
    "bonding_curve_step_structure": {
      "required_steps_minimum": [
        "Basic Info",
        "Token & Pool Params (mint/metadata + virtual reserves + graduation target)",
        "Fees Disclosure (deploy fee, swap fee split, migration fee)",
        "Team Vesting (mandatory)",
        "Review",
        "Create/Deploy (pay deploy fee + sign tx)"
      ],
      "explicitly_remove_if_present": [
        "Start/End time sale schedule",
        "Min/Max buy presale rules",
        "Investor vesting schedule",
        "Presale anti-bot step",
        "LP lock setup step as mandatory pre-launch (LP lock is post-migration requirement unless specs say pre-config)"
      ]
    },
    "validation": {
      "must_use_zod": true,
      "fairlaunch_rules": [
        "softcap > 0",
        "tokens_for_sale > 0",
        "liquidityPercent >= 70",
        "lpLockMonths >= 12",
        "teamVesting required"
      ],
      "bonding_curve_rules": [
        "tokenMint required",
        "graduationTargetSol > 0",
        "deployFee acknowledgement required",
        "teamVesting required"
      ]
    },
    "ui_details": {
      "must_update": [
        "Stepper labels and descriptions per module",
        "Progress indicator denominator must match step count",
        "Review step summary fields must match module",
        "Empty/default states must not auto-fill from presale storage"
      ],
      "nice_to_have": [
        "Key points info box at top reflecting module rules",
        "Inline helper text for tricky fields (tokens_for_sale, softcap, liquidity %, virtual reserves)"
      ]
    }
  },
  "manual_qa_checklist": {
    "fairlaunch": [
      "Open /create/fairlaunch -> stepper shows 7 steps (not 9)",
      "Step 2 shows tokens_for_sale + softcap + payment token + start/end",
      "Liquidity step enforces >=70% and LP lock >=12 months",
      "Team vesting step exists and required",
      "Review step shows fairlaunch-specific summary and mentions final price rule",
      "LocalStorage: filling presale does not affect fairlaunch defaults (and vice versa)"
    ],
    "bonding_curve": [
      "Open /create/bonding-curve -> stepper is not presale 9 steps",
      "Token mint + curve params exist; no presale sale schedule fields",
      "Fees disclosure step shows deploy/swap/migration fee",
      "Team vesting required",
      "Review step shows bonding curve summary + migration/LP lock info",
      "LocalStorage: filling presale/fairlaunch does not affect bonding curve defaults (and vice versa)"
    ]
  },
  "agent_output_format": {
    "required_sections": [
      "1) Specs summary (what you extracted from Modul_3 and Modul_4)",
      "2) What was wrong (root cause in code: shared config import / storage key collision)",
      "3) Changes made (file list + key diffs)",
      "4) Screenshots note (what to capture)",
      "5) Manual QA results (pass/fail)"
    ]
  },
  "execution_prompt": "BACA semua file specs yang diwajibkan terlebih dahulu (Modul_3_fairlaunch.json, Modul_4_bonding-curve.json, dan modul terkait). Lalu perbaiki UI /create/fairlaunch dan /create/bonding-curve agar tidak lagi memakai config presale (stepper 9 steps, schema presale, storage key presale). Gunakan wizard engine yang sama jika sudah ada, tetapi buat config terpisah untuk fairlaunch dan bonding curve: steps[], zodSchema, defaultValues, storageKey unik, dan reviewMapper. Terapkan struktur step sesuai bagian 'fairlaunch_step_structure' dan 'bonding_curve_step_structure' serta validasi rules wajib. Pastikan progress indicator, label stepper, review summary, dan LocalStorage persistence tidak collision antar modul. Jangan membangun admin UI. Output patch PR-ready + manual QA checklist (pass/fail) + minimal 2 screenshot per wizard (Step 1 & Review) untuk membuktikan stepper count dan field sudah benar."
}
